# The flash section can be given multiple times and each section describes a
# flash chip. The option names are mostly derived from the UBI terminology.
# There are the following options:

# :pebsize:		The size of a physical eraseblock in bytes
# :lebsize:		The size of a logical eraseblock in bytes (for ubifs)
# :numpebs:		Number of physical eraseblocks on this device. The total
# 			size of the device is determined by pebsize * numpebs
# :minimum-io-unit-size:	The minimum size in bytes accessible on this device
# :vid-header-offset:	offset of the volume identifier header
# :sub-page-size:		The size of a sub page in bytes.

# Several flash related image types need a valid flash section. From the image types
# the flash type section is referred to using the ``flashtype`` option which contains
# the name of the flash type to be used.

# For more information of the meaning of these values see the ubi(fs) and mtd FAQs:

# http://www.linux-mtd.infradead.org/faq/general.html

# Example flash section::

#   flash nand-64M-512 {
# 	  pebsize = 16384
# 	  lebsize = 15360
# 	  numpebs = 4096
# 	  minimum-io-unit-size = 512
# 	  vid-header-offset = 512
# 	  sub-page-size = 512
#   }
#   ...
#   image jffs2 {
# 	  flashtype = "nand-64M-512"
#   }


flash w25q128 {
	pebsize = 65536
	lebsize = 65408
	numpebs = 256
	minimum-io-unit-size = 1
	sub-page-size = 1
	vid-header-offset = 64
}

image flash.bin {
	flash {}
	flashtype = w25q128
	partition uboot {
		image = "u-boot-sunxi-with-spl.bin"
		size = 256K
	}
	partition rootubi {
		image = root.ubi
		size = 0
	}
}

image persist.ubifs {
	ubifs {
		extraargs = "--compr=zlib --jrn-size=192KiB --log-lebs=2"
	}
	size=1280K
	flashtype = w25q128
	mountpoint = /root
}

image root.ubi {
	ubi {}
	partition kernel {
		image = "zImage"
		read-only = true
	}
	partition dtb {
		image = "sunivboard.dtb"
		read-only = true
	}
	partition root {
		image = "rootfs.squashfs"
		read-only = true
		size = 0
	}

	partition persist {
		image = persist.ubifs
		size = 1M
	}
}
